!function(){"use strict";!function(){var e=angular.module("roberthodgen.countdown",[]);e.constant("COUNTDOWN_CLASSES",{normal:"countdown-normal",warn:"countdown-warn",danger:"countdown-danger"}),e.directive("countdown",[function(){return{restirct:"E",compile:function(e){function n(e,n,t,a){a.$element=n,a.endTimestamp=t.endTimestamp,a.start()}return e.addClass("countdown"),{post:n}},controller:["$scope","$interval","COUNTDOWN_CLASSES",function(e,n,t){function a(e,n){var t=this;t.$element=e,t.endTimestamp=n}var o=this;o.$element=null,o.interval=null,o.endTimestamp=null,o.appliedClass=null;var l=10,i=5;a.prototype.update=function(){var e=this;angular.isDefined(e.endTimestamp)&&null!==e.endTimestamp&&(e.buildDates(),e.calculateTimeRemaining(),e.applyStyle(),e.writeToDom())},a.prototype.buildDates=function(){var e=this;e.endDate=new Date(e.endTimestamp),e.nowDate=new Date},a.prototype.calculateTimeRemaining=function(){var e=this,n=e.endDate.getTime()-e.nowDate.getTime();n=Math.floor(n/1e3),e.seconds=Math.max(n,0)},a.prototype.applyStyle=function(){var e=this;e.$element.removeClass(e.appliedClass),e.appliedClass=t.normal,e.seconds<=l&&(e.appliedClass=t.warn),e.seconds<=i&&(e.appliedClass=t.danger),e.$element.addClass(e.appliedClass)},a.prototype.writeToDom=function(){var e=this;e.$element.text(e.seconds)},o.start=function(){o.interval=n(o.update,1e3,o),o.update()},o.update=function(){var n=e.$eval(o.endTimestamp);new a(o.$element,n).update()},e.$on("$destroy",function(){n.cancel(o.interval),o.$element=null})}]}}])}()}();